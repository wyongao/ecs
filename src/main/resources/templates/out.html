<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>出校申请</title>
		<link rel="stylesheet" type="text/css" href="css/layui.css" />
		<link rel="stylesheet" type="text/css" href="css/base.css" />
	</head>
	<body>

		<div id="container">


			<div class="hs">
				<div class="header">
					<ul class="layui-nav">
						<li class="layui-nav-item">
							<a th:href="@{/login}">退出</a>
						</li>
						<li class="layui-nav-item">
							<a href="javascript:;"><img src="//t.cn/RCzsdCq" class="layui-nav-img">我</a>
						</li>
					</ul>
				</div>
				<div class="side">
					<ul class="layui-nav layui-nav-tree layui-nav-side">
						<li class="layui-logo">
							<span><a href="">疫情防控管理系统</a></span>
						</li>
						<li class="layui-nav-item">
							<a href="javascript:;">数据管理</a>
							<dl class="layui-nav-child">
								<dd><a th:href="@{/goDailyData}">打卡数据</a></dd>
								<dd><a th:href="@{/goBaseData}">基础数据</a></dd>
							</dl>
						</li>
						<li class="layui-nav-item layui-nav-itemed">
							<a href="javascript:;">申请管理</a>
							<dl class="layui-nav-child">
								<dd><a th:href="@{/goOut}" class="layui-this">出校申请</a></dd>
								<dd><a th:href="@{/goIn}">入校申请</a></dd>
							</dl>
						</li>
						<li class="layui-nav-item"><a href="javascript:;">数据报表</a></li>
						<li class="layui-nav-item"><a href="javascript:;">二维码</a></li>
						<li class="layui-nav-item"><a th:href="@{/goAccessData}">访问记录</a></li>
						<!-- <li class="layui-nav-item">
							<a href="javascript:;">用户管理</a>
							<dl class="layui-nav-child">
								<dd><a th:href="@{/goUserData}">用户数据</a></dd>
								<dd><a th:href="@{/goAddUser}">添加用户</a></dd>
							</dl>
						</li> -->
						<li class="layui-nav-item"><a href="javascript:;">设置</a></li>
					</ul>
				</div>
			</div>
			<div class="main layui-body">
				<div class="top layui-form">
					<div class="layui-form-item">
						<select class="layui-select" name="college" lay-verify="">
							<option value="010" selected>计算机学院</option>
							<option value="021">会计学院</option>
							<option value="0571">理学院</option>
						</select>
					</div>
					<div class="layui-form-item">
					<select class="layui-select" name="major" lay-verify="">
						<option value="010" selected>计算机科学与技术</option>
						<option value="021">物联网工程</option>
						<option value="0571">软件工程</option>
					</select>
					</div>
					<div class="layui-form-item">
					<select class="layui-select" name="class" lay-verify="">
						<option value="010" selected>1741</option>
						<option value="021">1742</option>
						<option value="0571">1743</option>
					</select>
					</div>
					<div class="layui-form-item">
						<input type="search" class="layui-input layui-input-inline" placeholder="201710913305">
						<button type="button" class="layui-btn layui-btn-primary">搜索</button>
					</div>
				</div>
				<div class="layui-table-box">
					<table class="layui-table" id="dataTable" lay-filter="dataTable">
						
					</table>
				</div>
			</div>
		</div>



		<script src="js/layui.all.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/html" id="barDemo">
  			<button class="layui-btn layui-btn-xs" lay-event="agree">通过</button>
  			<button class="layui-btn layui-btn-danger layui-btn-xs" lay-event="reject">驳回</button>
		</script>
		
		<script type="text/javascript" th:inline="javascript">
		layui.use('table', function(){
			var table = layui.table;
			var $ = layui.jquery;
			 table.render({
				    elem: '#dataTable'
				    ,url: [[@{/outData}]]
				    ,cellMinWidth: 80 
				    ,page: true
				    ,method: 'post'
				    ,limit: 12
				    ,even: true
				    ,cols: [
				    	[ 
						  {field: 'id', title: '序号', width: 60}
						,{field: 'sname', title: '姓名', width: 100}
						,{field: 'snum', title: '学号', width: 150}						
						,{field: 'college', title: '学院', width: 160}
						,{field: 'major', title: '专业', minWidth: 160}
						,{field: 'classes', title: '班级', width: 80}
						,{field: 'date', title: '申请时间', width: 140}
						,{field: 'exit', title: '进出地点', width: 80}
						,{field: 'reason', title: '原因', width: 80}
						,{field: 'status', title: '状态', width: 60}
						,{width: 140, align:'center', toolbar: '#barDemo'}
						]
				    	]
				    ,groups : 5
					,jump: function(obj){
				      console.log(obj)
				    }
				  });
			/*  function getValue(){
					 var checkStatus=table.checkStatus('dataTable');
					 console.log(checkStatus);
					 console.log(checkStatus.data.length);
					data=checkStatus.data;
					 alert("重点来了");
					 alert(data);
					date=data.date;
					snum=data.snum;
					alert(date+snum);
			 }; */
			 table.on('tool(dataTable)',function(obj){
				 switch(obj.event){
				 case 'agree':
					// getValue();
					 var status=1;
					 alert("同意");
					 break;
				 case 'reject':
					 var status=0;
					 alert("拒绝");
					 break;
				 };
			 });
			 
		/* 	 function changStatus(status){
				 
				 $.ajax({
						type: "post",
				 		url: [[@{/findAllCollege}]],
						dataType:"json",
				 		success: function(data) {
				 			alert(data.data2[1].id);
				 			alert(data.data2[1].collegename);
				 			  $("#college").empty();
				 			  $(" #college").prepend("<option value='0'>请选择学院</option>");
				 			  for (var i = 0; i < data.data2.length; i++) {
								//如果在select中传递其他参数，可以在option 的value属性中添加参数
								$("#college").append("<option value='" + data.data2[i].id + "'>" + data.data2[i].collegename +
									"</option>"); 
									
							};
							form.render('select');
						},
						error: function(){
							alert("获取数据失败,请重试.")
						}
					});
			 } */
		});
		</script>
	</body>
</html>
